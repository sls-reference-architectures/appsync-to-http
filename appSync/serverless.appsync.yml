name: appsync-to-http
schema: appSync/schema.api.graphql
authentication:
  type: API_KEY
additionalAuthentications:
- type: AWS_IAM
apiKeys:
- name: test
  description: The test api key
  expiresAfter: 300d
logging:
  level: ALL
  retentionInDays: 3
resolvers:
  Query.getProduct:
    kind: UNIT
    dataSource: ProductsService
    code: appSync/resolvers/getProduct.js
  Query.getProductInternal:
    kind: UNIT
    dataSource: ProductsService
    code: appSync/resolvers/getProduct.js
  Query.getProducts:
    kind: UNIT
    dataSource: ProductsService
    code: appSync/resolvers/getProducts.js  
    # functions:
    # - dataSource: ProductsService
    #   request: appSync/resolvers/Query.getProducts.request.vtl
    #   response: appSync/resolvers/Query.getProducts.response.vtl
  Mutation.createProduct:
    functions:
    - dataSource: ProductsService
      request: appSync/resolvers/Mutation.createProduct.request.vtl
      response: appSync/resolvers/Mutation.createProduct.response.vtl
  Query.getProductV2:
    functions:
    - dataSource: ProductsService
      request: appSync/resolvers/Query.getProductV2.request.vtl
      response: appSync/resolvers/Query.getProductV2.response.vtl
dataSources:
- ${file(appSync/dataSources/products.yml)}
- ${file(appSync/dataSources/echo.yml)}
  